<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Molleiros Decor | Sistema Profissional Est√°vel</title>

<!-- LIB √öNICA E EST√ÅVEL PARA PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
:root{
 --rosa:#f8c8dc;--rosa2:#f4b3cd;--amarelo:#fff1c1;--texto:#444;
}
body{font-family:'Segoe UI',Arial;background:#fff7fb;margin:0;color:var(--texto)}
header{background:var(--rosa);padding:20px;text-align:center}
header img{height:90px}
section{background:#fff;max-width:1100px;margin:20px auto;padding:25px;border-radius:16px;box-shadow:0 0 14px rgba(0,0,0,.06)}
h2{color:#c64f86;margin-top:0}
label{display:block;margin-top:10px;font-size:14px}
input{width:100%;padding:8px;border-radius:8px;border:1px solid #ddd}
button{background:var(--rosa);border:none;padding:10px 18px;border-radius:10px;margin-top:15px;cursor:pointer}
button:hover{background:var(--rosa2)}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #eee;padding:8px;text-align:center;font-size:14px}
th{background:var(--amarelo)}
.total{font-size:20px;font-weight:bold;color:#c64f86;margin-top:15px}

/* CONTRATO VIS√çVEL */
#contratoPDF{margin-top:40px;padding:50px;min-height:1100px;background:linear-gradient(135deg,#ffe6f0,#fff8dc,#e8f7ff);position:relative}
.watermark{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);opacity:0.08}
.watermark img{width:90%}
.contrato{position:relative;z-index:1;font-size:14px;line-height:1.6}
.valorDestaque{font-size:22px;font-weight:bold;color:#c64f86;margin:15px 0}
</style>
</head>

<body>
<header><img src="logo.png"></header>

<section>
<h2>üë©‚Äçüëß Dados do Cliente</h2>
<label>Nome</label><input id="cNome">
<label>CPF</label><input id="cCpf">
<label>Telefone</label><input id="cTel">
<label>Endere√ßo</label><input id="cEnd">
</section>

<section>
<h2>üí∞ Valores da Loca√ß√£o</h2>
<label>Valor do Contrato (R$)</label><input id="valorContrato" type="number" oninput="atualizar()">
<label>Sinal Pago (R$)</label><input id="sinal" type="number" oninput="atualizar()">
<div class="total" id="valorReceber">Valor a Receber: R$ 0,00</div>
</section>

<section>
<h2>üì¶ Itens do Kit (valores apenas para avaria/extravio)</h2>
<label>Item</label><input id="item">
<label>Valor de Reposi√ß√£o (R$)</label><input id="valorItem" type="number">
<button onclick="addItem()">Adicionar Item</button>
<table id="tItens"><tr><th>Item</th><th>Valor Reposi√ß√£o</th></tr></table>
</section>

<section>
<button onclick="gerarContrato()">üîÑ Atualizar Contrato</button>
<button onclick="gerarPDF()">üìÑ Gerar PDF</button>
</section>

<section id="contratoPDF">
<div class="watermark"><img src="logo.png"></div>
<div class="contrato" id="contratoConteudo"></div>
</section>

<script>
let itens=[];

function addItem(){
 let i=item.value;
 let v=Number(valorItem.value||0);
 if(!i||v<=0)return alert('Preencha item e valor');
 itens.push({i,v});
 tItens.innerHTML+=`<tr><td>${i}</td><td>R$ ${v.toFixed(2)}</td></tr>`;
 item.value='';valorItem.value='';
 gerarContrato();
}

function atualizar(){gerarContrato();}

function gerarContrato(){
 let vc=Number(valorContrato.value||0);
 let s=Number(sinal.value||0);
 let receber=vc-s;
 valorReceber.innerText=`Valor a Receber: R$ ${receber.toFixed(2)}`;

 let lista=itens.length?itens.map(x=>`‚Ä¢ ${x.i} ‚Äì Valor reposi√ß√£o: R$ ${x.v.toFixed(2)}`).join('<br>'):'‚Äî';

 contratoConteudo.innerHTML=`
 <h1 style="text-align:center;color:#c64f86">CONTRATO DE LOCA√á√ÉO ‚Äì PEGUE E MONTE</h1>

 <strong>LOCADORA:</strong><br>
 Molleiros Decor ‚Äì Decora√ß√£o Infantil<br>
 CNPJ/CPF: 290.285.608-31<br>
 WhatsApp: (11) 97291-8935<br>
 Endere√ßo: Rua Odilon Henrique de Macedo, 67<br><br>

 <strong>LOCAT√ÅRIO:</strong><br>
 ${cNome.value||''}<br>
 CPF: ${cCpf.value||''}<br>
 Telefone: ${cTel.value||''}<br>
 Endere√ßo: ${cEnd.value||''}<br><br>

 <strong>VALOR DO CONTRATO:</strong>
 <div class="valorDestaque">R$ ${vc.toFixed(2)}</div>

 <strong>SINAL PAGO:</strong> R$ ${s.toFixed(2)}<br>
 <strong>VALOR A RECEBER:</strong> R$ ${receber.toFixed(2)}<br><br>

 <strong>ITENS LOCADOS (VALORES PARA AVARIA / EXTRAVIO):</strong><br>
 ${lista}<br><br>

 <strong>CL√ÅUSULAS CONTRATUAIS:</strong><br>
 1. O presente contrato rege a loca√ß√£o de materiais no sistema <strong>Pegue e Monte</strong>.<br>
 2. O LOCAT√ÅRIO declara receber os itens em perfeito estado.<br>
 3. Em caso de avaria ou extravio, ser√° cobrado o valor integral de reposi√ß√£o.<br>
 4. Atraso na devolu√ß√£o gera multa de 25% do valor da loca√ß√£o por dia.<br>
 5. Contrato com validade jur√≠dica conforme MP 2.200-2/2001.<br><br>

 <strong>Foro:</strong> Carapicu√≠ba / SP
 `;
}

function gerarPDF(){
 gerarContrato();
 html2pdf().from(document.getElementById('contratoPDF')).set({
  margin:10,
  filename:'Contrato_Molleiros_Decor.pdf',
  html2canvas:{scale:2,useCORS:true},
  jsPDF:{format:'a4',orientation:'portrait'}
 }).save();
}

gerarContrato();
</script>
</body>
</html>
